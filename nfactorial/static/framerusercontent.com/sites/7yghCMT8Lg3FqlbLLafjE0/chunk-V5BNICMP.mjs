import{s as w,t as i,w as n,x as g}from"./chunk-46A2A62J.mjs";import{c as r}from"./chunk-A3IIQ6X3.mjs";function v(){let[u,f]=i(!1),[d,p]=i(""),[c,h]=i(!1),[s,b]=i({name:"",email:"",number:""}),x=e=>{let t=e.target.value.replace(/\D/g,"");t=t.substring(0,11);let o="";t.length>0&&(t[0]==="7"||t[0]==="8"?(o="+7",t=t.substring(1)):(t[0]==="9"||t.length>1)&&(o="+7"),t.length>0&&(o+=" ("+t.substring(0,3)),t.length>3&&(o+=") "+t.substring(3,6)),t.length>6&&(o+="-"+t.substring(6,8)),t.length>8&&(o+="-"+t.substring(8,10))),e.target.value=o,b(R=>({...R,number:o}));let S=t.length===10||t.length===11&&t[0]==="7";f(S),p(S?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u043E\u043C\u0435\u0440 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 +7 (XXX) XXX-XX-XX")},l=(e,a)=>{b(t=>({...t,[e]:a}))},m=async()=>{if(!u||c)return;h(!0);let e=s.number.replace(/\D/g,""),a=e.startsWith("8")?"+7"+e.substring(1):"+"+e,t={name:s.name,phone:a,email:s.email||"",referrer:r.location.href||document.referrer||"",utmData:{utm_source:new URLSearchParams(r.location.search).get("utm_source")||"",utm_medium:new URLSearchParams(r.location.search).get("utm_medium")||"",utm_campaign:new URLSearchParams(r.location.search).get("utm_campaign")||"",utm_term:new URLSearchParams(r.location.search).get("utm_term")||"",utm_content:new URLSearchParams(r.location.search).get("utm_content")||""}};try{await fetch("https://test.nfactorial.school/api/b2b",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r.location.href="thanks"}catch(o){console.error("Error submitting form:",o),p("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0444\u043E\u0440\u043C\u044B"),h(!1)}};return n("div",{style:C,children:g("div",{style:D,children:[d&&n("p",{style:j,children:d}),n("input",{type:"text",name:"name",placeholder:"\u0418\u043C\u044F",required:!0,style:_,value:s.name,onChange:e=>l("name",e.target.value)}),n("input",{type:"email",name:"email",placeholder:"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F",required:!0,style:_,value:s.email,onChange:e=>l("email",e.target.value)}),n("input",{type:"tel",name:"number",placeholder:"+7 (___) ___-__-__",required:!0,style:_,onChange:x}),n("button",{type:"button",disabled:!u||c||!s.name||!s.email,style:F,onClick:m,children:c?"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...":"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u044E"})]})})}var C={backgroundColor:"rgba(246, 246, 246, 0.2)",padding:"8px",borderRadius:"20px"},D={display:"flex",flexDirection:"column",gap:"10px",borderRadius:"8px"},_={padding:"16px",border:"1px solid #1B2876",borderRadius:"28px",fontSize:"18px",color:"black"},F={padding:"16px",border:"none",borderRadius:"28px",backgroundColor:"#1B2876",color:"white",fontSize:"18px",cursor:"pointer",opacity:"0.8"},j={color:"#1B2876",fontWeight:"600",textAlign:"center"};function L(){let[u,f]=i(!1),[d,p]=i(""),[c,h]=i(!1),s=w(null);return n("div",{style:k,children:g("form",{ref:s,onSubmit:async l=>{if(l.preventDefault(),!u||c)return;h(!0);let m=new FormData(l.target),e=m.get("number").replace(/\D/g,""),a=e.startsWith("8")?"+7"+e.substring(1):"+"+e,t={name:m.get("name"),phone:a,email:m.get("email")||"",referrer:r.location.href||document.referrer||"",utmData:{utm_source:new URLSearchParams(r.location.search).get("utm_source")||"",utm_medium:new URLSearchParams(r.location.search).get("utm_medium")||"",utm_campaign:new URLSearchParams(r.location.search).get("utm_campaign")||"",utm_term:new URLSearchParams(r.location.search).get("utm_term")||"",utm_content:new URLSearchParams(r.location.search).get("utm_content")||""}};try{await fetch("https://test.nfactorial.school/api/websiteForm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r.location.href="thanks"}catch(o){console.error("Error submitting form:",o),p("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0444\u043E\u0440\u043C\u044B"),h(!1)}},style:N,children:[d&&n("p",{style:M,children:d}),g("div",{style:U,children:[n("input",{type:"text",name:"name",placeholder:"\u0418\u043C\u044F",required:!0,style:y}),n("input",{type:"email",name:"email",placeholder:"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F",required:!0,style:y})]}),n("input",{type:"tel",name:"number",placeholder:"+7 (___) ___-__-__",required:!0,style:y,onChange:l=>{let e=l.target.value.replace(/\D/g,"");e=e.substring(0,11);let a="";e.length>0&&(e[0]==="7"||e[0]==="8"?(a="+7",e=e.substring(1)):(e[0]==="9"||e.length>1)&&(a="+7"),e.length>0&&(a+=" ("+e.substring(0,3)),e.length>3&&(a+=") "+e.substring(3,6)),e.length>6&&(a+="-"+e.substring(6,8)),e.length>8&&(a+="-"+e.substring(8,10))),l.target.value=a;let t=e.length===10||e.length===11&&e[0]==="7";f(t),p(t?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u043E\u043C\u0435\u0440 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 +7 (XXX) XXX-XX-XX")}}),n("button",{type:"submit",disabled:!u||c,style:I,children:c?"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...":"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u044E"})]})})}var U={display:"flex",width:"auto",gap:"12px"},k={backgroundColor:"rgba(246, 246, 246, 0.2)",padding:"8px",borderRadius:"20px"},N={display:"flex",flexDirection:"column",gap:"10px",borderRadius:"8px"},y={padding:"16px",border:"1px solid #1B2876",borderRadius:"28px",fontSize:"18px",color:"black",width:"100%"},I={padding:"16px",border:"none",borderRadius:"28px",backgroundColor:"#1B2876",color:"white",fontSize:"18px",cursor:"pointer"},M={color:"1B2876",fontWeight:"600",textAlign:"center"};export{v as a,L as b};
//# sourceMappingURL=chunk-V5BNICMP.mjs.map
