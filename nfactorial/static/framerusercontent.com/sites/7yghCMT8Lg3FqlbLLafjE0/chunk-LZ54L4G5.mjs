import{t as l,w as o,x as m}from"./chunk-46A2A62J.mjs";import{c as t}from"./chunk-A3IIQ6X3.mjs";function P(){let[f,S]=l(!1),[g,d]=l(""),[c,y]=l(!1),[v,w]=l(!1),[i,b]=l({name:"",company:"",phone:""}),C=n=>{let e=n.target.value.replace(/\D/g,"");e=e.substring(0,11);let r="";e.length>0&&(e[0]==="7"||e[0]==="8"?(r="+7",e=e.substring(1)):(e[0]==="9"||e.length>1)&&(r="+7"),e.length>0&&(r+=" ("+e.substring(0,3)),e.length>3&&(r+=") "+e.substring(3,6)),e.length>6&&(r+="-"+e.substring(6,8)),e.length>8&&(r+="-"+e.substring(8,10))),n.target.value=r,b(u=>({...u,phone:r}));let a=e.length===10||e.length===11&&e[0]==="7";S(a),d(a?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u043E\u043C\u0435\u0440 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 +7 (XXX) XXX-XX-XX")},_=(n,s)=>{b(e=>({...e,[n]:s}))},X=async n=>{if(n.preventDefault(),!f||c)return;y(!0),d("");let s=i.phone.replace(/\D/g,""),e=s.startsWith("8")?"+7"+s.substring(1):s.startsWith("7")?"+"+s:"+7"+s,r={name:i.name,company:i.company,phone:e,referrer:typeof t<"u"&&(t.location?.href||document.referrer)||"",utmData:{utm_source:typeof t<"u"&&new URLSearchParams(t.location?.search||"").get("utm_source")||"",utm_medium:typeof t<"u"&&new URLSearchParams(t.location?.search||"").get("utm_medium")||"",utm_campaign:typeof t<"u"&&new URLSearchParams(t.location?.search||"").get("utm_campaign")||"",utm_term:typeof t<"u"&&new URLSearchParams(t.location?.search||"").get("utm_term")||"",utm_content:typeof t<"u"&&new URLSearchParams(t.location?.search||"").get("utm_content")||""}};try{console.log("Sending data:",r);let a=await fetch("https://test.nfactorial.school/api/b2b",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"}),u=await a.json();if(!a.ok)throw console.error(`Server error (${a.status}):`,u),new Error(u.error||`Server error: ${a.status}`);console.log("Form submitted successfully:",u),w(!0),setTimeout(()=>{typeof t<"u"&&(t.location.href="thanks")},500)}catch(a){console.error("Error submitting form:",a),d("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0444\u043E\u0440\u043C\u044B. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."),y(!1)}};if(v)return o("div",{style:x,children:m("div",{style:j,children:[o("h3",{children:"\u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u0437\u0430\u044F\u0432\u043A\u0443!"}),o("p",{children:"\u041C\u044B \u0441\u0432\u044F\u0436\u0435\u043C\u0441\u044F \u0441 \u0432\u0430\u043C\u0438 \u0432 \u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043C\u044F."})]})});let p=i.name.trim()&&i.company.trim()&&f;return o("div",{style:x,children:m("div",{style:R,children:[g&&o("p",{style:F,children:g}),o("input",{type:"text",placeholder:"\u0418\u043C\u044F",required:!0,style:h,value:i.name,onChange:n=>_("name",n.target.value)}),o("input",{type:"text",placeholder:"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F",required:!0,style:h,value:i.company,onChange:n=>_("company",n.target.value)}),o("input",{type:"tel",placeholder:"+7 (___) ___-__-__",required:!0,style:h,onChange:C}),o("button",{type:"button",disabled:!p||c,style:{...D,opacity:!p||c?.7:1,cursor:!p||c?"not-allowed":"pointer"},onClick:X,children:c?"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...":"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u044E"})]})})}var x={backgroundColor:"rgba(246, 246, 246, 0.2)",padding:"8px",borderRadius:"20px"},R={display:"flex",flexDirection:"column",gap:"10px",borderRadius:"24px"},h={padding:"16px",border:"1px solid #EAE7E3",borderRadius:"24px",fontSize:"18px",color:"black",width:"100%"},D={padding:"16px",border:"none",borderRadius:"24px",backgroundColor:"#1b2876",color:"white",fontSize:"18px",cursor:"pointer"},F={color:"red",fontWeight:"600",textAlign:"center"},j={padding:"20px",textAlign:"center",color:"#333"};export{P as a};
//# sourceMappingURL=chunk-LZ54L4G5.mjs.map
